

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Programming Gotchas &mdash; SWAT 1.7.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Troubleshooting" href="troubleshooting.html" />
    <link rel="prev" title="swat.cas.utils.datetime.sas2cas_time" href="generated/swat.cas.utils.datetime.sas2cas_time.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> SWAT
          

          
          </a>

          
            
            
              <div class="version">
                1.7.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">What’s New</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="binary-vs-rest.html">Binary vs. REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="encryption.html">Encryption (SSL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="loading-data.html">Loading Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="table-vs-dataframe.html">CASTable vs. DataFrame vs. SASDataFrame</a></li>
<li class="toctree-l1"><a class="reference internal" href="indexing.html">Indexing and Data Selection</a></li>
<li class="toctree-l1"><a class="reference internal" href="bygroups.html">Handling By Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="sorting.html">Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Programming Gotchas</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#return-values">Return Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="#name-collisions">Name Collisions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#case-sensitivity">Case-Sensitivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sasdataframe-vs-pandas-dataframe">SASDataFrame vs pandas.DataFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="#weak-cas-object-references">Weak CAS Object References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="sas-tk.html">SAS TK</a></li>
<li class="toctree-l1"><a class="reference internal" href="licenses.html">Licenses</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SWAT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Programming Gotchas</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/gotchas.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="programming-gotchas">
<span id="gotchas"></span><h1>Programming Gotchas<a class="headerlink" href="#programming-gotchas" title="Permalink to this headline">¶</a></h1>
<p>There are a few areas in working with SWAT where you can get tripped up.  We’ve
tried to outline some of the common issues to watch out for.</p>
<div class="section" id="return-values">
<h2>Return Values<a class="headerlink" href="#return-values" title="Permalink to this headline">¶</a></h2>
<p>Since the SWAT API tries to blend the world of CAS and Pandas into a single world,
you have to be aware of whether you are calling a CAS action or a method from
the Pandas API.  CAS actions will always return a <a class="reference internal" href="generated/swat.cas.results.CASResults.html#swat.cas.results.CASResults" title="swat.cas.results.CASResults"><strong>CASResults</strong></a> object
(which is a subclass of Python’s dictionary).</p>
<pre class="literal-block">In [1]: out = tbl.summary()

In [2]: type(out)
Out[2]: swat.cas.results.CASResults

In [3]: out = tbl.serverstatus()
<br/><strong class="param-meta">Note:</strong> Grid node action status report: 1 nodes, 11 total actions executed.

In [4]: type(out)
Out[4]: swat.cas.results.CASResults</pre>
<p>Methods from the Pandas API will
typically return a <strong>CASTable</strong>, <strong>CASColumn</strong>, <a class="reference external" href="https://pandas.pydata.org/pandas-docs/version/0.19.2/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.19.2)"><strong>pandas.DataFrame</strong></a>,
or <a class="reference external" href="https://pandas.pydata.org/pandas-docs/version/0.19.2/generated/pandas.Series.html#pandas.Series" title="(in pandas v0.19.2)"><strong>pandas.Series</strong></a> object.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">out</span> <span class="o">=</span> <span class="n">tbl</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>

<span class="gp">In [6]: </span><span class="nb">type</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
<span class="gh">Out[6]: </span><span class="go">swat.SASDataFrame</span>

<span class="gp">In [7]: </span><span class="n">out</span> <span class="o">=</span> <span class="n">tbl</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="gp">In [8]: </span><span class="nb">type</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
<span class="gh">Out[8]: </span><span class="go">pandas.core.series.Series</span>

<span class="gp">In [9]: </span><span class="n">out</span> <span class="o">=</span> <span class="n">tbl</span><span class="o">.</span><span class="n">Make</span>

<span class="gp">In [10]: </span><span class="nb">type</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
<span class="gh">Out[10]: </span><span class="go">swat.cas.table.CASColumn</span>
</pre></div>
</div>
</div>
<div class="section" id="name-collisions">
<h2>Name Collisions<a class="headerlink" href="#name-collisions" title="Permalink to this headline">¶</a></h2>
<p>Much like the way <strong>pandas.DataFrames</strong> allows you to access column names
as attributes as well as keys, some objects in the SWAT package also have
multiple namespaces mapped to their attributes.  This is especially true with
<a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a> objects.</p>
<p><a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a> objects have attributes that can come from various sources.
These include real object attributes and methods, CAS action names, CAS
table parameter names, and CAS table column names.  Mapping all of these
attributes into one namespace can create collisions.  The most notable
collisions on <a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a> objects are <strong>groupby</strong> (method, CAS action,
table parameter) and <strong>promote</strong> (CAS action, table parameter).</p>
<p>These collisions can manifest themselves in ways that seem confusing.  Here
is an example.</p>
<pre class="literal-block">In [11]: tbl.groupby
Out[11]: &lt;bound method CASTable.groupby of CASTable('TMPEJFKE0QA', caslib='CASUSER(castest)')&gt;

In [12]: tbl.groupby = ['Origin']

In [13]: tbl.groupby
Out[13]: &lt;bound method CASTable.groupby of CASTable('TMPEJFKE0QA', caslib='CASUSER(castest)', groupby=['Origin'])&gt;

In [14]: tbl.params
Out[14]: {'name': 'TMPEJFKE0QA', 'caslib': 'CASUSER(castest)', 'groupby': ['Origin']}</pre>
<p>As you can see, the <strong>groupby</strong> method is returned when getting the attribute,
but the table <strong>groupby</strong> parameter is set when setting the attribute.  The
reason for this is that the dynamic look-thru for CAS actions and table parameters
only happens if there isn’t a real Python attribute or method defined.  In the case
of <a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a> objects, the <strong>groupby</strong> method is defined to match the
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/version/0.19.2/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v0.19.2)"><strong>pandas.DataFrame.groupby()</strong></a> method.</p>
<p>When setting attributes, the name of
the attribute is checked against the valid parameter names for a table.  If it matches
the name of a table attribute, it is set as a CAS table parameter, otherwise it
is just set on the object as a standard Python attribute.</p>
<p>While this attribute syntax can be convenient for interactive programming, because
of the possibility of collisions, it’s generally useful to use the explicit namespace
for table parameters when writing programs.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [15]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">groupby</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Origin&#39;</span><span class="p">]</span>

<span class="gp">In [16]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">params</span>
<span class="gh">Out[16]: </span><span class="go">{&#39;name&#39;: &#39;TMPEJFKE0QA&#39;, &#39;caslib&#39;: &#39;CASUSER(castest)&#39;, &#39;groupby&#39;: [&#39;Origin&#39;]}</span>
</pre></div>
</div>
<p>Here is the <strong>simple.groupby</strong> CAS action explicitly accessed using the <strong>simple</strong>
action set name.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [17]: </span><span class="n">tbl</span><span class="p">[[</span><span class="s1">&#39;Origin&#39;</span><span class="p">,</span> <span class="s1">&#39;Cylinders&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">simple</span><span class="o">.</span><span class="n">groupby</span><span class="p">()</span>
<span class="gh">Out[17]: </span><span class="go"></span>
<span class="go">[Groupby]</span>

<span class="go"> Groupby for TMPEJFKE0QA</span>
<span class="go"> </span>
<span class="go">     Origin Origin_f  Cylinders   Cylinders_f  Rank</span>
<span class="go"> 0     Asia     Asia        NaN             .    14</span>
<span class="go"> 1     Asia     Asia        3.0             3    13</span>
<span class="go"> 2     Asia     Asia        4.0             4    12</span>
<span class="go"> 3     Asia     Asia        6.0             6    11</span>
<span class="go"> 4     Asia     Asia        8.0             8    10</span>
<span class="go"> 5   Europe   Europe        4.0             4     9</span>
<span class="go"> 6   Europe   Europe        5.0             5     8</span>
<span class="go"> 7   Europe   Europe        6.0             6     7</span>
<span class="go"> 8   Europe   Europe        8.0             8     6</span>
<span class="go"> 9   Europe   Europe       12.0            12     5</span>
<span class="go"> 10     USA      USA        4.0             4     4</span>
<span class="go"> 11     USA      USA        6.0             6     3</span>
<span class="go"> 12     USA      USA        8.0             8     2</span>
<span class="go"> 13     USA      USA       10.0            10     1</span>

<span class="go">+ Elapsed: 0.0189s, user: 0.019s, sys: 0.005s, mem: 5.35mb</span>
</pre></div>
</div>
<p>When getting the <strong>groupby</strong> attribute, it will always return the real Python <strong>groupby</strong>
method, which corresponds to the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/version/0.19.2/generated/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby" title="(in pandas v0.19.2)"><strong>pandas.DataFrame.groupby()</strong></a> method.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="n">tbl</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Origin&#39;</span><span class="p">)</span>
<span class="gh">Out[18]: </span><span class="go">&lt;swat.cas.table.CASTableGroupBy at 0x7f2729676ad0&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="case-sensitivity">
<h2>Case-Sensitivity<a class="headerlink" href="#case-sensitivity" title="Permalink to this headline">¶</a></h2>
<p>While Python programming is case-sensitive, CAS is not.  This means that CAS action names
and parameters can be specified in any sort of mixed case.  This can cause problems on
clients where case-sensitivity matters though.  For example, it’s possible to make a CAS
action call as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conn</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Max&#39;</span><span class="p">,</span> <span class="s1">&#39;Min&#39;</span><span class="p">]</span>
             <span class="n">subSet</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;N&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>While you would never actually type code in like that, you may build parameters up
programmatically and mistakenly put in mixed case keys.  When you send this action call to
CAS the action will fail because they are considered duplicate keys.</p>
<p>The SWAT client automatically lower-cases all of the action and parameter names in the
help content to encourage you to always use lower-case as well.  It also uses all lower-cased
parameter names in operations done behind the scenes.  This convention gets as
close to the Python convention of lower-cased, underscore-delimited names as possible
even though it does cause some longer names to be a bit more difficult to read.</p>
<p>The one case where case-sensitivity does make a difference is in CAS action names.
If the first letter of the CAS action name is capitalized (e.g., <strong>conn.Summary()</strong>),
This causes an instance of a CAS action object to be returned rather than calling the action.
This allows you to build action parameters in a more object oriented way and call the same
action multiple times.</p>
</div>
<div class="section" id="sasdataframe-vs-pandas-dataframe">
<h2>SASDataFrame vs pandas.DataFrame<a class="headerlink" href="#sasdataframe-vs-pandas-dataframe" title="Permalink to this headline">¶</a></h2>
<p>For the most part, you don’t need to worry about the difference between a <a class="reference internal" href="generated/swat.dataframe.SASDataFrame.html#swat.SASDataFrame" title="swat.SASDataFrame"><strong>SASDataFrame</strong></a>
and a <strong>panda.DataFrame</strong>.  They work exactly the same way.  The only difference is that
a <a class="reference internal" href="generated/swat.dataframe.SASDataFrame.html#swat.SASDataFrame" title="swat.SASDataFrame"><strong>SASDataFrame</strong></a> contains extra attributes to store the SAS metadata such as
<strong>title</strong>, <strong>label</strong>, and <strong>name</strong>, as well as <strong>colinfo</strong> for the column metadata.
The only time you need to be concerned about the difference is if you are doing operations
on a <a class="reference internal" href="generated/swat.dataframe.SASDataFrame.html#swat.SASDataFrame" title="swat.SASDataFrame"><strong>SASDataFrame</strong></a> such as <a class="reference external" href="https://pandas.pydata.org/pandas-docs/version/0.19.2/generated/pandas.concat.html#pandas.concat" title="(in pandas v0.19.2)"><strong>pandas.concat()</strong></a> that end up returning a
<a class="reference external" href="https://pandas.pydata.org/pandas-docs/version/0.19.2/generated/pandas.DataFrame.html#pandas.DataFrame" title="(in pandas v0.19.2)"><strong>pandas.DataFrame</strong></a>.  In cases such as that, you will lose the SAS metadata on
the result.</p>
</div>
<div class="section" id="weak-cas-object-references">
<h2>Weak CAS Object References<a class="headerlink" href="#weak-cas-object-references" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a> objects can only call CAS actions on <strong>CAS</strong> connections that still
exist in the Python namespace (meaning, they haven’t been deleted or overwritten with another object).
If you delete the <strong>CAS</strong> object that a <a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a> object is associated
with then try to call a CAS action on that <a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a>, the action call will fail.
This is due to the fact that <a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a> objects only keep a weak reference to the
<strong>CAS</strong> connection.  However, you can re-associate a connection with the <a class="reference internal" href="generated/swat.cas.table.CASTable.html#swat.cas.table.CASTable" title="swat.cas.table.CASTable"><strong>CASTable</strong></a>
using the <a class="reference internal" href="generated/swat.cas.table.CASTable.set_connection.html#swat.cas.table.CASTable.set_connection" title="swat.cas.table.CASTable.set_connection"><strong>CASTable.set_connection()</strong></a> method.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="troubleshooting.html" class="btn btn-neutral float-right" title="Troubleshooting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="generated/swat.cas.utils.datetime.sas2cas_time.html" class="btn btn-neutral float-left" title="swat.cas.utils.datetime.sas2cas_time" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 SAS Institute Inc. All Rights Reserved.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>